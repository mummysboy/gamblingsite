<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Local Bonuses - Professional</title>
    <link rel="stylesheet" href="styles/theme-professional.css">
</head>
<body>
    <div class="welcome-screen" id="welcomeScreen">
        <h1 class="welcome-title">Signup Bonuses</h1>
        <p class="welcome-subtitle">Discover the best gambling bonuses available in your area</p>
        <button class="begin-btn" onclick="handleBegin()">Begin</button>
    </div>

    <div class="age-verification hidden" id="ageVerification">
        <h2 class="age-question">Are you 21 or older?</h2>
        <div class="age-buttons">
            <button class="age-btn yes" onclick="handleAgeVerification(true)">Yes</button>
            <button class="age-btn no" onclick="handleAgeVerification(false)">No</button>
        </div>
    </div>

    <div class="zip-code-form hidden" id="zipCodeForm">
        <h2 class="zip-question">What is your zip code?</h2>
        <div class="zip-input-group">
            <input type="text" id="zipCode" class="zip-input" placeholder="Enter your zip code" maxlength="5" pattern="[0-9]{5}" required>
        </div>
        <button class="zip-submit-btn" onclick="handleZipCodeSubmit()">Continue</button>
    </div>

    <div class="loading-screen hidden" id="loadingScreen">
        <div class="loading-spinner"></div>
        <h2 class="loading-message" id="loadingMessage">Finding bonuses...</h2>
    </div>

    <div class="gambling-question hidden" id="gamblingQuestion">
        <h2 class="gambling-question-text">Do you have a gambling problem?</h2>
        <div class="gambling-buttons">
            <button class="gambling-btn yes" onclick="handleGamblingQuestion(true)">Yes</button>
            <button class="gambling-btn no" onclick="handleGamblingQuestion(false)">No</button>
        </div>
    </div>

    <div class="bonus-form hidden" id="bonusForm">
        <h1 class="form-title">Here are the bonuses available in <span id="locationTitle"></span></h1>
        <p class="location-subtitle">Exclusive offers for your area</p>
        
        <div class="bonus-container">
            <div class="bonus-card">
                <div class="bonus-header">
                    <span class="bonus-number">BONUS 1</span>
                    <span class="bonus-amount">Up to $250</span>
                </div>
                <p class="bonus-description">First Bet Offer - Get up to $250 paid back in bonus bets if you don't win</p>
                <button class="bonus-btn" onclick="window.open('https://www.nv.betmgm.com/en/engage/lan/sports/first-bet-offer-nba?utm_source=PPC&utm_medium=Sports&utm_campaign=TMI_BetMGM_NV_[_Sports_]_Brand+Core+[Ex]_AIMax&utm_term=22157139742_174412348512_betmgm&utm_content=&wm=7139020&ben=&cid=22157139742&cn=TMI_MGM_NV_GPPC_ACQ_SBS_17_GS_web_PRO_DR_NA_CPC_N_TMI-NV-MGM-Sports-Prospecting-FBO250_SARR_250__N&po=SARR_250_&fec=nv&pc=17&spc=GS&pl=GPPC&tc=ACQ&mc=SBS&at=TMI&mt=PRO&obj=DR&tre=NA&buy=CPC&ska=N&aw=web&ty=Desktop&la=en&cre=&btag=22157139742&ol=N&gad_source=1&gad_campaignid=22157139742&gbraid=0AAAAACyFTZbm9oKjLULG2L0XEe-1oz5KG&gclid=CjwKCAiA95fLBhBPEiwATXUsxB3jpYfYsFAIA5SdWnkzkP0r8j9F0wPiQXrsa_v-JZvdtpv8X_gHlxoC7Z0QAvD_BwE', '_blank')">Claim Bonus</button>
            </div>
            
            <div class="bonus-card">
                <div class="bonus-header">
                    <span class="bonus-number">BONUS 2</span>
                    <span class="bonus-amount">Welcome Offer</span>
                </div>
                <p class="bonus-description">Exclusive welcome bonus for new players - Sign up and get started today</p>
                <button class="bonus-btn" onclick="window.open('https://ny.betrivers.com/?page=landing', '_blank')">Claim Bonus</button>
            </div>
            
            <div class="bonus-card">
                <div class="bonus-header">
                    <span class="bonus-number">BONUS 3</span>
                    <span class="bonus-amount">Special Promo</span>
                </div>
                <p class="bonus-description">Limited time offer - Don't miss out on this exclusive promotion</p>
                <button class="bonus-btn" onclick="window.open('https://www.fanduel.com/', '_blank')">Claim Bonus</button>
            </div>
        </div>
        
        <a href="index.html" class="back-link">‚Üê Back to Homepage</a>
    </div>

    <script src="zip-code-lookup.js"></script>
    <script>
        let userLocation = ''; // Store user location for later use

        function handleBegin() {
            // Hide welcome screen and show age verification
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('ageVerification').classList.remove('hidden');
        }

        function handleAgeVerification(is21OrOlder) {
            if (is21OrOlder) {
                // Hide age verification and show the zip code form
                document.getElementById('ageVerification').classList.add('hidden');
                document.getElementById('zipCodeForm').classList.remove('hidden');
            } else {
                // Redirect to Chuck E. Cheese website
                window.location.href = 'https://www.chuckecheese.com/';
            }
        }

        async function handleZipCodeSubmit() {
            const zipCode = document.getElementById('zipCode').value;
            // Validate zip code (5 digits)
            if (zipCode && /^\d{5}$/.test(zipCode)) {
                // Hide zip code form and show loading screen
                document.getElementById('zipCodeForm').classList.add('hidden');
                document.getElementById('loadingScreen').classList.remove('hidden');
                
                const loadingMessage = document.getElementById('loadingMessage');
                loadingMessage.textContent = 'Finding bonuses...';
                
                // Lookup city and state for the zip code using API
                const locationString = await getLocationString(zipCode);
                userLocation = locationString; // Store for later use
                loadingMessage.textContent = `Finding bonuses in ${locationString}...`;
                
                // Simulate loading time (2 seconds total) then show gambling question
                setTimeout(() => {
                    document.getElementById('loadingScreen').classList.add('hidden');
                    document.getElementById('gamblingQuestion').classList.remove('hidden');
                }, 2000);
            } else {
                alert('Please enter a valid 5-digit zip code');
            }
        }

        function handleGamblingQuestion(hasGamblingProblem) {
            if (hasGamblingProblem) {
                // User says yes (has gambling problem) - redirect to gambling help website
                window.location.href = 'https://www.1800gambler.net/';
            } else {
                // User says no (no gambling problem) - show the bonus listings
                document.getElementById('gamblingQuestion').classList.add('hidden');
                document.getElementById('bonusForm').classList.remove('hidden');
                
                // Update the location title in the bonus form
                const locationTitle = document.getElementById('locationTitle');
                locationTitle.textContent = userLocation;
            }
        }

        // Allow Enter key to submit zip code
        document.addEventListener('DOMContentLoaded', function() {
            const zipInput = document.getElementById('zipCode');
            if (zipInput) {
                zipInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        handleZipCodeSubmit();
                    }
                });
            }
        });
    </script>
</body>
</html>
